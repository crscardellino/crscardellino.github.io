<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Course | Cristian Cardellino]]></title>
  <link href="http://crscardellino.me/blog/posts/categories/course/atom.xml" rel="self"/>
  <link href="http://crscardellino.me/blog/"/>
  <updated>2014-08-26T20:02:44+02:00</updated>
  <id>http://crscardellino.me/blog/</id>
  <author>
    <name><![CDATA[Cristian Cardellino]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[From Python to Scala (VII): Functions (II)]]></title>
    <link href="http://crscardellino.me/blog/post/2014/08/26/from-python-to-scala-vii-functions-ii/"/>
    <updated>2014-08-26T20:05:00+02:00</updated>
    <id>http://crscardellino.me/blog/post/2014/08/26/from-python-to-scala-vii-functions-ii</id>
    <content type="html"><![CDATA[<p>Hello again! Nice to see you decided to come back. If you check my
<a href="/post/2014/08/23/from-python-to-scala-vi-functions/">previous post</a>
you know that functions are quite an important matter in the Scala
language.</p>

<p>Last time, talking about recursion, I wasn&rsquo;t able to cover all the topics about
functions. So I decided to dedicate yet another post to it. You can call it
&ldquo;advanced functions&rdquo;, but I don&rsquo;t think is so &ldquo;advance&rdquo; what I&rsquo;m going to show
here.</p>

<p>So, you are welcome to read some more on functions in this new blog post.</p>

<h3>Arguments</h3>

<h4>Default Values</h4>

<p>Ok, following the <a href="https://docs.python.org/2/tutorial/">Python Tutorial</a>, I&rsquo;ll
talk a little about this.</p>

<p>Default argument values in Scala are very similar to Python&rsquo;s. With the
difference being in the static types, that is, you&rsquo;ll have to explicit declare
the type of the argument:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">foo</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span> <span class="o">*</span> <span class="n">z</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// Returns 10&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span> <span class="c1">// Returns 20&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Returns 40&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">z</span> <span class="k">=</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Returns 20&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">z</span> <span class="k">=</span> <span class="mi">2</span><span class="o">,</span> <span class="n">y</span> <span class="k">=</span> <span class="mi">10</span><span class="o">)</span> <span class="c1">// Returns 40&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="n">y</span> <span class="k">=</span> <span class="mi">10</span><span class="o">)</span> <span class="c1">// Error! The parameter &lt;code&gt;y&lt;/code&gt; has already been specified</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>As you can see, there is no problem in how to send the arguments, but if you
don&rsquo;t explicitly tell what parameter you are passing, it will use the order to
define the assignments.</p>

<!-- more -->


<p>In Scala you don&rsquo;t even have to declare all the parameters with default
arguments at the end (like in Python), but it&rsquo;s a good practice as otherwise
you&rsquo;ll face with problems:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">foo</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span> <span class="o">*</span> <span class="n">z</span> <span class="c1">// Valid!&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span> <span class="c1">// Wrong, &lt;code&gt;z&lt;/code&gt; has no value&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">15</span><span class="o">)</span> <span class="c1">// Wrong, 15 is assigned to &lt;code&gt;y&lt;/code&gt; not &lt;code&gt;z&lt;/code&gt;. &lt;code&gt;z&lt;/code&gt; still has no value&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="n">z</span> <span class="k">=</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Returns 20</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>You see? In this version of foo, you have to explicit declare z as a passed
parameter, otherwise you get an error. That&rsquo;s why it&rsquo;s good practice to keep
all arguments with default values in the end.</p>

<p>Of course, as parameters have a type, you have to give the a default value of
that type (or with an implicit conversion to that type), otherwise is an error:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">foo</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="mi">0</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span> <span class="o">*</span> <span class="n">z</span><span class="o">}</span> <span class="c1">// Valid. &lt;code&gt;0&lt;/code&gt; is an Int with implicit conversion to Double&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">bar</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">z</span><span class="k">:</span> <span class="kt">Double</span> <span class="o">=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="o">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span> <span class="o">*</span> <span class="n">z</span><span class="o">}</span> <span class="c1">// Invalid. &lt;code&gt;null&lt;/code&gt; has no implicit conversion to Double</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now, on the last code I introduce a new value I don&rsquo;t think I talked about it
before: <strong>null</strong>. The value <strong>null</strong> is similar to the value <strong>None</strong> in
Python. It&rsquo;s specially useful to use it on a variable of a particular class
when you don&rsquo;t want to instantiate that class just yet (for example a class
defined by you). You can use on some variables of Scala types such as String or
List, but not in a primitive type (Int, Double, Char, etc.). We&rsquo;ll talk more
about it when we start working on classes. For now I just wanted to make a
quick warning: do not use the (also) reserved word in Scala of <strong>None</strong> as the
value <strong>null</strong>. It&rsquo;s not the same, None is a value of a special Scala type
called <strong>Option</strong>, that we&rsquo;ll discuss in further posts.</p>

<p><blockquote><p>Do not use the (also) reserved word in Scala of <code>None</code> as the value <code>null</code>.</p></blockquote></p>

<h4>Arbitrary List</h4>

<p>In Scala, as in Python, you can pass an argument representing an arbitrary list
of arguments. This argument always has to be defined as the last one and is
treated as a list of elements of the defined type (you cannot have a list of
types of mixed values):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">sum</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Int*</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">for</span><span class="o">(</span><span class="n">arg</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="n">args</span><span class="o">)</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">arg</span>
</span><span class='line'>  <span class="n">x</span>
</span><span class='line'><span class="o">}</span> <span class="c1">// Return the sum of all the parameters&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// returns 1&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// return 3&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">sum</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">1000</span><span class="o">)</span> <span class="c1">// returns 1111</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now, Scala does not have an equivalent to Python&rsquo;s <em>**kwargs</em>. There are some
workarounds you can do, but I don&rsquo;t think it&rsquo;s useful for me to get deep into
that.</p>

<h3>Lambda expressions (a.k.a. anonymous functions)</h3>

<p>Well, anonymous functions, such a powerful and useful tool in Scala (when you
start with them, you end up using them everywhere). Anonymous functions are
<em>the tool</em> that makes a functional programming language. These are core concept
in the paradigm, so obviously I won&rsquo;t be able to explain it well enough.
Instead, I&rsquo;ll take the example in the Python tutorial, and show how it is done
in Scala. Then again, you&rsquo;ll have to learn more on anonymous functions on your
own, as it&rsquo;s not the idea of my tutorial to teach more than the basics that
helps a Python programmer enter in the Scala world.</p>

<p><blockquote><p>Anonymous functions are the tool that makes a functional programming language.</p></blockquote></p>

<p>Ok, so, let&rsquo;s show you the Python example of use of a lambda expression, they
create a function which returns a function:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">make_incrementor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>
</span><span class='line'><span class="n">f</span> <span class="o">=</span> <span class="n">make_incrementor</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</span><span class='line'><span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="mi">42</span>
</span><span class='line'><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="mi">43</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote></blockquote></blockquote>

<p>Now, in this example, you create a lambda expression using the <strong>lambda</strong>
reserved word. In Scala the code is quite similar, but you don&rsquo;t need an extra
expression:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">make_incrementor</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">f</span> <span class="k">=</span> <span class="n">make_incrementor</span><span class="o">(</span><span class="mi">42</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">f</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// Returns 42&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">f</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// Returns 43</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Pay attention to the returned value by the function <em>make_incrementor</em>:
<em>(x:Int) => x + n</em>. This is the definition of an anonymous function, basically
a function with it&rsquo;s parameters, no name and a => operator instead of a =
operator.</p>

<p>This functions can have as many parameters as you want and you can directly
apply them without making necessary to assign them to a value or variable:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;()</span> <span class="k">=&gt;</span> <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">Hello</span><span class="o">,</span> <span class="n">world</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span> <span class="c1">// Anonymous function with zero parameter&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;((</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="o">)(</span><span class="mi">20</span><span class="o">)</span> <span class="c1">// Applies the anonymous function and returns 40</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now, of course, as everything in Scala, functions have types, and sometimes you
may need to explicit declare a function type. This can happen, for example, if
you are declaring a recursive function with a return value of an anonymous
function; however, the function type declaration is fundamental when having a
function&rsquo;s parameter taking a function. This is called
<a href="http://en.wikipedia.org/wiki/Higher-order_programming">higher-order programming</a>
and is a topic for another post (a whole post in fact), it&rsquo;s another of the
core features of functional programming.</p>

<p>For now, you only need to now that the type of a function is defined by the
type of its parameters and the returning type:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">foo</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">50</span> <span class="c1">// Equivalent to: def foo(x: Int): Int = x + 50&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">foo</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span> <span class="c1">// Returns 50&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">bar</span><span class="k">:</span> <span class="o">()</span> <span class="o">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">()</span> <span class="k">=&gt;</span> <span class="mi">20</span> <span class="c1">// Equivalent to def b(): Int = 20&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">bar</span><span class="o">()</span> <span class="c1">// Returns 20&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">baz</span><span class="k">:</span> <span class="o">(</span><span class="kt">Int</span><span class="o">,</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nc">Int</span> <span class="k">=</span> <span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c1">// Equivalent to def baz(x: Int, y: Int): Int = x + y&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">baz</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="c1">// Returns 5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>As you see, sometimes the parentheses are not mandatory when the function only
takes one parameter but it is obligatory in any other case.</p>

<p>Of course, this examples are very simple and don&rsquo;t really show the power of
anonymous functions nor even why sometimes is necessary to explicit the type.
This, hopefully, will come later and you&rsquo;ll understand the importance of it in
a functional programming language like Scala.</p>

<p>So, I think is now time to finish this post. As always, I&rsquo;ll be thankful on
your comments. Best regards and until the next part!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[From Python to Scala (VI): Functions]]></title>
    <link href="http://crscardellino.me/blog/post/2014/08/23/from-python-to-scala-vi-functions/"/>
    <updated>2014-08-23T20:30:00+02:00</updated>
    <id>http://crscardellino.me/blog/post/2014/08/23/from-python-to-scala-vi-functions</id>
    <content type="html"><![CDATA[<p>Welcome to another post on my series of tutorials. As you can see (if you were
following my tutorials since I started them), I change the environment of my
blog, using Octopress to facilitate the blog writing (it has very nice features
such as the automatic categories and blog archive).</p>

<p>This time we will exploring one of the most powerful things Scala offers as a
functional programming language. That is, of course, the functions, the core
concept in this paradigm.</p>

<p>This concept is quite important, and I&rsquo;m sure I won&rsquo;t be able to explain the
full potential of Scala functions as I&rsquo;m not a master in functional programming
paradigm. Yet, I&rsquo;ll do my best. However, it is important that you take a
tutorial or course on Scala&rsquo;s functional programming (I deeply recommend Martin Odersky&rsquo;s
<a href="https://www.coursera.org/course/progfun">Functional Programming Principles in Scala</a>).</p>

<h3>Functions Basics</h3>

<p>Scala functions are declared using the same reserved word that Python uses:
<strong>def</strong>. Like all Scala&rsquo;s control flow instructions, the scope of the function
is defined either by the immediate next instruction or by a block closed
between curly braces: <strong>{</strong> and <strong>}</strong>.</p>

<p><blockquote><p>I won&rsquo;t be able to explain the full potential of Scala functions as I&rsquo;m not a<br/>master in functional programming paradigm. Yet, I&rsquo;ll do my best.</p></blockquote></p>

<p>Functions in Scala are actually values assigned to a symbol (just like a
<strong>val</strong> or a <strong>var</strong>), so naturally they have a type. The type of a function is
defined as a list of parameters of some type returning a parameter of some type
(can be the same, can be different). In basic terms, this means that every
parameter of a function should have an explicit type (the system cannot infer
the type on its own and will throw an error if you don&rsquo;t declare it). But, they
can have an implicit returning type that the system can infer:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c1">// All good!&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">pow2</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="c1">// Correct again. The system infer the returning type as Int&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">substract</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">=</span> <span class="n">x</span> <span class="o">-</span> <span class="n">y</span> <span class="c1">// Wrong. The system doesn&amp;rsquo;t know the type of x and y</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<!-- more -->


<p>Pay attention in my last code. Every function define is followed by an equality
sign (<strong>=</strong>) and neither of them needed the <strong>return</strong> reserved word.</p>

<p>The equality sign is particularly important, it&rsquo;s the one that states the
function returns a value. If you forget it, then there are two options: You get
an error if the block is not marked with braces or the function doesn&rsquo;t have a
returning value. You&rsquo;ll also get an error if you impose it with a return
directive or give the function a return type:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">{</span> <span class="kt">x</span> <span class="kt">+</span> <span class="kt">y</span> <span class="o">}</span> <span class="c1">// Wrong&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span><span class="kt">Int</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">}</span> <span class="c1">// Wrong&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="c1">// Wrong&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">add</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">}</span> <span class="c1">// It&amp;rsquo;s not an error. But the function doesn&amp;rsquo;t return a value when you apply it.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Functions that doesn&rsquo;t return a value have a special returning type called
Unit, but of course, you can just skip it.</p>

<p>Another important thing is that the reserved word <strong>return</strong>, that exists in
Scala and does the same thing as in Python is not necessary for functions in
order to return a value. In Scala the evaluation of the last expression or
instruction is the returned value of the function. Return is only necessary if
you want to force a return value in the middle of the function (which is not
very functional programming, but it can be done). Also, return requires to
explicit the returning value of the function.</p>

<h3>A Little on Recursion</h3>

<p>Ok, this is a major area in functional programming. There are papers, articles
and books on this subject and I won&rsquo;t be able to do enough justice to it in
just one blog post. Basically, in real functional programming, all loops are
written as recursive functions (instead of using imperative instructions like
<strong>while</strong> or <strong>for</strong>).</p>

<p>A recursive function is a function that in order to give a result, solves a
simpler version of the same function (it calls itself recursively). Taking in
consideration the example given in the <a href="https://docs.python.org/2/tutorial">Python Tutorial</a>
in section 4.6, the Fibonacci function example that takes a integer <em>n</em> and
returns a list containing the Fibonacci series up to <em>n</em> (the one called fib2):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">fib2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="c"># return Fibonacci series up to n</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;</span><span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="n">Return</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">Fibonacci</span> <span class="n">series</span> <span class="n">up</span> <span class="n">to</span> <span class="n">n</span><span class="o">.&amp;</span><span class="n">rdquo</span><span class="p">;</span><span class="o">&amp;</span><span class="n">ldquo</span><span class="p">;</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="p">;</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="k">while</span> <span class="n">a</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">n</span><span class="p">:</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>         <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>    <span class="c"># see below</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>         <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>     <span class="k">return</span> <span class="n">result</span>
</span><span class='line'><span class="o">&amp;</span><span class="n">hellip</span><span class="p">;</span>
</span><span class='line'><span class="n">f100</span> <span class="o">=</span> <span class="n">fib2</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>    <span class="c"># call it</span>
</span><span class='line'><span class="n">f100</span>                <span class="c"># write the result</span>
</span><span class='line'><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote></blockquote></blockquote>

<p>In Scala you can basically copy-paste the algorithm they show and twitch it a
little bit to get the same function:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">import</span> <span class="nn">scala.collection.mutable.ListBuffer</span> <span class="c1">// The equivalent to Python&amp;rsquo;s list&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="n">fib</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">val</span> <span class="n">result</span><span class="k">:</span> <span class="kt">ListBuffer</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">()</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">a</span> <span class="k">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">b</span> <span class="k">=</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">var</span> <span class="n">aux</span> <span class="k">=</span> <span class="mi">0</span> <span class="c1">// Needed. Scala doesn&amp;rsquo;t accept multiple variable assignment</span>
</span><span class='line'>  <span class="k">while</span> <span class="o">(</span><span class="n">a</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span> <span class="n">n</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">result</span> <span class="o">+=</span> <span class="n">a</span>
</span><span class='line'>    <span class="n">aux</span> <span class="k">=</span> <span class="n">a</span>
</span><span class='line'>    <span class="n">a</span> <span class="k">=</span> <span class="n">b</span>
</span><span class='line'>    <span class="n">b</span> <span class="k">=</span> <span class="n">b</span> <span class="o">+</span> <span class="n">aux</span>
</span><span class='line'>  <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">result</span><span class="o">.</span><span class="n">toList</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">fib</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span> <span class="c1">// Will return List(0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now, as you could see there, there are a couple of difference between this and
the Python version. The main one resides in the use of a third auxiliary
variable, <em>aux</em>, as Scala doesn&rsquo;t support multiple assign over existing
variables, like the instruction: <em>a, b = b, a+b</em>. But on other ways is quite
similar to the Python algorithm.</p>

<p>However, if we want to make this a recursive function, a first approach to do
the same (although not an elegant one) can be represented by:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">fib</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span> <span class="c1">// The returning value is mandatory for recursive functions</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">n</span><span class="o">)</span> <span class="nc">Nil</span>
</span><span class='line'>  <span class="k">else</span> <span class="n">a</span> <span class="o">::</span> <span class="n">fib</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">fib</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">100</span><span class="o">)</span> <span class="c1">// Will return List(0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Ok, I guess the extra parameters are not really ideal, but you can see that in
this version we didn&rsquo;t need state, we didn&rsquo;t need to import the ListBuffer, we
didn&rsquo;t need the auxiliary variable and we even reduce the written code a lot.
The only sacrifice was to add two extra parameters.</p>

<p>The good thing about Scala (and I think you can also do this in Python as well,
but I&rsquo;m not sure about it), is that you can define a function inside another
function, so, we can rewrite the last function taking advantage of this:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">def</span> <span class="n">fib</span><span class="o">(</span><span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">fibaux</span><span class="o">(</span><span class="n">a</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">b</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">n</span><span class="o">)</span> <span class="nc">Nil</span>
</span><span class='line'>    <span class="k">else</span> <span class="n">a</span> <span class="o">::</span> <span class="n">fibaux</span><span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
</span><span class='line'>  <span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">fibaux</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">n</span><span class="o">)</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">fib</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span> <span class="c1">// Will return List(0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Nice, huh? In this new version we use a locally defined a <em>fibaux</em> which
result&rsquo;s value we return as the value of the main fib function. Then, we only
need to call <em>fib</em> with only one parameter just like in the imperative version
before and we still manage to save code writing (and avoid state). We can even
declare <em>fibaux</em> without the <em>n</em> parameter as it will take the <em>n</em> parameter
from the fib function scope. But I think getting into that is way more than I&rsquo;m
capable of explain: you should read something on
<a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29">scope</a>.</p>

<p>Recursion is a powerful resource. And is not easy to master. As everything in
programming, if it is correctly used, it will have lots of advantages, if it&rsquo;s
misused, well, you can guess the results: extreme resource consumption is most
probably what you&rsquo;ll be dealing with.</p>

<p><blockquote><p>Remember, recursion is a major area in functional programming. There are<br/>papers, articles and books on this subject and I won&rsquo;t be able to do enough<br/>justice to it in just one blog post.</p></blockquote></p>

<p>Well. I think that this is already enough for you to process before moving on
with a new post. Functions are the way to go in Scala. Don&rsquo;t take them for
granted, they are a core concept in the Scala world and can easily define how
good or bad as a Scala programmer you will be. We have some more topics to
discuss on functions before moving on some other subject, but I think this is
enough for today. I&rsquo;m trying to keep this tutorials simple and concise.</p>

<p>As always, thank you for reading. All your feedback and comments are welcome
(even if it&rsquo;s for state a spelling or grammar mistake).</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[From Python to Scala (v): Control Flow Tools]]></title>
    <link href="http://crscardellino.me/blog/post/2014/08/20/from-python-to-scala-v-control-flow-tools/"/>
    <updated>2014-08-20T20:58:48+02:00</updated>
    <id>http://crscardellino.me/blog/post/2014/08/20/from-python-to-scala-v-control-flow-tools</id>
    <content type="html"><![CDATA[<p>Ok, after a short period of laziness, I come back for more. I warned you about
my activity, but, to be fair, it&rsquo;s been a busy couple of weeks at work.</p>

<p>However, before starting, I wanted you to know that there is an upcoming Course
for Functional Programming Principles in Scala in 25 days (starts on September
15th). You can find more information about it (or even enroll in it) at
<a href="https://www.coursera.org/course/progfun">Coursera</a>. The course is in charge of
Martin Odersky, the creator of Scala, so you are in good hands.</p>

<p>So, back to business. On this session let&rsquo;s talk about some more real
programming.</p>

<h3>Control Flow Tools</h3>

<h4>The if statement</h4>

<p>The most basic and probably the most well known statement in programming, the
conditional control flow:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">x</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">10</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span> <span class="mi">0</span><span class="o">)</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Negative</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span>
</span><span class='line'><span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Positive</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Zero</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Will</span> <span class="k">return:</span> <span class="kt">&amp;ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Positive</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<!-- more -->


<p>Ok, very basic, right? So, what are the differences with Python&rsquo;s <strong>if</strong>?</p>

<p>For starter, the indentation is not actually necessary, it is used for better
reading, but you can put everything with the same indent. Actually, it&rsquo;s even
possible to make an if statement at the same line. But, it is important to
remark, as it dos not holds a colon to delimit the end of the boolean
expression to value, it does needs the parentheses to delimit it.</p>

<p>You can also see that there is no <strong>elif</strong> but you just start another <strong>if</strong> after
the <strong>else</strong>.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Negative</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Positive</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span> <span class="k">else</span> <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Zero</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Will</span> <span class="k">return:</span> <span class="kt">&amp;ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Negative</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">if</span> <span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;</span> <span class="mi">0</span> <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Negative</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span> <span class="c1">// Invalid, will result in error.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The blocking delimiter in an if statement can be nothing as long as there is
only one instruction after the if or the else, or can be the curly braces:
<strong>{</strong> and <strong>}</strong>:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">x</span> <span class="k">=</span> <span class="o">-</span><span class="mi">2</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">x</span> <span class="n">is</span> <span class="nc">Positive</span><span class="o">.&amp;</span><span class="n">rdquo</span><span class="o">;)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="k">val</span> <span class="n">y</span> <span class="k">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">double</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="o">+</span> <span class="n">y</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>This programs obviously prints nothing. But if it doesn&rsquo;t have the curly braces
to delimit the if statement, the results would be:</p>

<pre><code>The double of x is: -4
</code></pre>

<p>This happens because when and if lacks curly braces it only takes the immediate
next statement as its body.</p>

<h4>Loop statements</h4>

<p>There are three types of loops in Scala: <strong>while</strong>, <strong>do&hellip;while</strong> and <strong>for</strong>.</p>

<p>The statements <strong>while</strong> and <strong>do&hellip;while</strong> are very similar. The two of them
execute a set of instructions multiple times until the condition they hold is
false. Much like Python&rsquo;s <strong>while</strong>.</p>

<p>Still, the same as with the <strong>if</strong> statement, the delimiter is either the
immediate next instruction or it is delimited by curly braces.</p>

<p>The main difference between <strong>while</strong> and <strong>do&hellip;while</strong>, is that the latter
executes what is inside the block of instructions at least once after checking
on the breaking instruction:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">var</span> <span class="n">x</span> <span class="k">=</span> <span class="mi">10</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">while</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>
</span><span class='line'>  <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Will</span> <span class="n">print</span> <span class="n">successively</span> <span class="n">the</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">until</span> <span class="n">x</span> <span class="n">equals</span> <span class="mi">0</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">x</span> <span class="k">=</span> <span class="mi">10</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">do</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>
</span><span class='line'><span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Exactly</span> <span class="n">the</span> <span class="n">same</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">x</span> <span class="k">=</span> <span class="mi">0</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">while</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>
</span><span class='line'>  <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'><span class="o">}&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Doesn</span><span class="o">&amp;</span><span class="n">rsquo</span><span class="o">;</span><span class="n">t</span> <span class="n">print</span> <span class="n">anything</span><span class="o">.</span> <span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span> <span class="mi">0</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">loop</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">x</span> <span class="k">=</span> <span class="mi">0</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">do</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">println</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="o">+</span> <span class="n">x</span><span class="o">)</span>
</span><span class='line'>  <span class="n">x</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'><span class="o">}</span> <span class="k">while</span> <span class="o">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">Prints</span><span class="k">:</span> <span class="kt">&amp;ldquo</span><span class="o">;</span><span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span><span class="k">:</span> <span class="err">0</span><span class="kt">&amp;rdquo</span><span class="o">;</span> <span class="n">and</span> <span class="n">finish</span><span class="o">.</span> <span class="nc">The</span> <span class="n">value</span> <span class="n">of</span> <span class="n">x</span> <span class="n">is</span> <span class="o">-</span><span class="mi">1</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">the</span> <span class="n">loop</span><span class="o">.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The for statement, as much as in Python, is useful for traversing Lists or
Arrays. It&rsquo;s also useful for list comprehensions. These are a very powerful
tools in functional programming, that actually Python also supports (check on
them if you are not familiar with it).</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">xs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="n">xs</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="c1">// Prints the values of xs, from 1 to 5&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">ys</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="n">xs</span><span class="o">)</span> <span class="k">yield</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">The</span> <span class="n">list</span> <span class="n">ys</span> <span class="n">holds</span> <span class="n">the</span> <span class="n">squares</span> <span class="n">of</span> <span class="n">every</span> <span class="n">value</span> <span class="n">in</span> <span class="n">xs</span><span class="k">:</span> <span class="err">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">25</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">zs</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="n">xs</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="k">yield</span> <span class="n">x</span> <span class="o">/</span> <span class="mi">2</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="nc">The</span> <span class="n">list</span> <span class="n">zs</span> <span class="n">has</span> <span class="n">the</span> <span class="n">half</span><span class="o">-</span><span class="n">values</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pairs</span> <span class="n">in</span> <span class="n">xs</span><span class="k">:</span> <span class="err">1</span><span class="o">,</span> <span class="mi">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>If you check on the <strong>yield</strong> instruction, this means that it will return the
result of the next operation as a value. Also, you can use the <strong>if</strong> statement
inside a <strong>for</strong> to set a filter for the values to go through.</p>

<p>The statement after yield can be anything that returns a value, so it can be a
function created before, or even a block (that is actually a function, but
let&rsquo;s not get into that for now) with a returning value at the end:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">ys</span> <span class="k">=</span> <span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="n">xs</span><span class="o">)</span> <span class="k">yield</span> <span class="o">{</span>
</span><span class='line'>  <span class="c1">// A lot of different operations over x, stored in a variable called &amp;ldquo;result&amp;rdquo;</span>
</span><span class='line'>  <span class="n">result</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>As an ending note on Scala loops, there is no direct control over the loop, I
mean, there is no <strong>break</strong>, <strong>continue</strong> or (may God have mercy on me for this
forbidden word) <strong>goto</strong>. When a loop starts there is no easy way to make it
break or jump on a cycle (you can set an if inside as well as other kinds of
workarounds).</p>

<p>The thing with Scala is, that if you need to mess with the natural flow of a
loop, maybe there is another and cleaner way to do it.</p>

<h4>The range equivalent (to and until)</h4>

<p>If you come from Python, you are surely familiar with the <strong>range</strong> function,
and maybe with the <strong>xrange</strong> function which is a lazy iterator.</p>

<p>In Scala there is a similar way to declare a range, the <strong>to</strong> operator:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">10</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="n">xs</span> <span class="n">now</span> <span class="n">holds</span> <span class="n">a</span> <span class="n">immutable</span> <span class="nc">Range</span> <span class="k">object</span> <span class="nc">that</span> <span class="n">goes</span> <span class="n">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">10</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The main difference with this an Python&rsquo;s <strong>range</strong>, is that with the <strong>to</strong>
operator you always need the lower boundary: this means there is not equivalent
to <strong>range(10)</strong> for example. And, the resulting range, holds both boundaries:
in our example 0 and 10 are part of the resulting Range object, whereas in
Python, the upper boundary is not in the resulting list. If you want a range
without taking in consideration the upper boundary, you can have it with the
<strong>until</strong> operator:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">xs</span> <span class="k">=</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">10</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;//</span> <span class="n">xs</span> <span class="n">holds</span> <span class="n">a</span> <span class="nc">Range</span> <span class="n">that</span> <span class="n">goes</span> <span class="n">from</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">9</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">10</span><span class="o">)</span> <span class="n">println</span><span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="c1">// Will print all the numbers from 0 to 9</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>As you could see in the last examples, the <strong>until</strong> (as well as the <strong>to</strong>)
operator, can be used directly in a for loop to create a range to loop over it.</p>

<h4>The pass equivalent</h4>

<p>For the last of today&rsquo;s post, I&rsquo;ll make a brief reference to Python&rsquo;s <strong>pass</strong>
Scala equivalent. There is none, as simple as that, in Scala if you don&rsquo;t want
to do something you just leave a blank space (as long as it is clear that there
is a blank statement):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">class</span> <span class="nc">EmptyClass</span> <span class="c1">// Is valid&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">10</span><span class="o">)</span> <span class="o">{}</span> <span class="c1">// Will go through the for without doing anything&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">for</span> <span class="o">(</span><span class="n">x</span> <span class="o">&amp;</span><span class="n">lt</span><span class="o">;-</span> <span class="mi">0</span> <span class="n">until</span> <span class="mi">10</span><span class="o">)</span> <span class="c1">// Wrong, it&amp;rsquo;s ambiguous where the the blank statement is</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Ok. I think this is more than enough for today. We learned some of the most
common control flow structures on Scala. Go and experiment by yourselves now.
As always, don&rsquo;t hesitate to leave your comments.</p>

<p>Thank you for reading. See you soon!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[From Python to Scala (IV): Arrays &amp; ListBuffers]]></title>
    <link href="http://crscardellino.me/blog/post/2014/08/07/from-python-to-scala-iv-arrays-and-listbuffers/"/>
    <updated>2014-08-07T20:48:14+02:00</updated>
    <id>http://crscardellino.me/blog/post/2014/08/07/from-python-to-scala-iv-arrays-and-listbuffers</id>
    <content type="html"><![CDATA[<p>Ok. So, now you&rsquo;ve learnt about Scala lists. As you could see in the previous
examples, Scala has a very <em>functional</em> kind of lists, as these are immutable.</p>

<p>If you are ever to use Scala as a functional programming language this is the
way to go. I really recommend you to, at least, try to learn this paradigm, as
it is design purpose and has many advantages. But, then again, even now I
sometimes go back to imperative programming in Scala myself because is more
natural to me. Scala as imperative language is pretty similar to Java, so as a
side effect I ended up learning how to read Java code (I knew some Java but
only the basics, learning Scala my Java understanding improved a lot).</p>

<p>But, lets say that functional programming is way too much to deal with now and
you want to know a type more similar to Python lists, the oldie but goodie
mutable lists. You have a couple of options of data structures available in
Scala, I&rsquo;ll present two of the most commons.</p>

<h4>Scala Arrays</h4>

<p>Ok, if my university&rsquo;s data structure teacher sees me presenting Scala arrays as
an option for a &ldquo;mutable&rdquo; list he probably would take away my degree and force
me to redo the Computer Sciences career all over again.</p>

<p>An array <strong>is not</strong> a list and will never be one. But, for someone who comes
from a Python environment, it&rsquo;s probably an easy option to replace a immutable
list for a mutable version.</p>

<p>Arrays are the simplest and one of the oldest (if not <em>the</em> oldest) data
structure you&rsquo;ll ever face with. In fact, most high-level programming languages
lists are internally implemented as arrays. If you&rsquo;ve ever deal with a real old
imperative programming language (I&rsquo;m looking at you C developer), you are
familiar to the concept of array. The thing is that Python doesn&rsquo;t really have
them (at least not internally, you&rsquo;ll have to import a module for dealing with
arrays).</p>

<p>Arrays have some pros and cons in programming, as every data structure. Among
the most common pros of an array you&rsquo;ll find the efficiency they carry in
comparison to lists. As arrays are represented as collection of elements (of
the same type) stored in a continuous space of memory. They differ from lists
in that you&rsquo;ll have an index for all the elements (which makes the access time
of a constant order) and in general are faster to make operations than in lists
which can have chunks of elements sparse in many places.</p>

<!-- more -->


<p>Arrays in Scala are a built-in type (you don&rsquo;t have to import them), and they
are completely compatible with Java arrays (in fact, are implemented as a
wrapper of Java arrays). And, as most arrays, they are naturally mutable as
they are stateful data structure (which makes them perfect for imperative
paradigms that relies on state), in contrast to stateless data structures like
lists (more associated to functional paradigm):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">array</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>
</span><span class='line'><span class="n">array</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">array</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
</span><span class='line'><span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">array</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="k">=</span> <span class="mi">5</span> <span class="c1">// This, not valid in lists, is valid in arrays.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">array</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>  <span class="c1">// Arrays are mutable!</span>
</span><span class='line'><span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>In general terms, you&rsquo;ll be able to do many of the lists&#8217; operations in an
array (like concatenation, traverse, length). However, as I state before,
arrays are not lists, and cannot replace them in all the occasions. The thing
is that arrays <em>do not</em> have a functionality to add (append or prepend)
elements to them (and if they do, usually are very time and resource consuming
which is not a good idea). You can emulate it with the concatenation, but it&rsquo;s
not the same thing, and this workaround creates a new structure instead of
modifying the existing one:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">var</span> <span class="n">array</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Pay attention to the &amp;ldquo;var&amp;rdquo; instead of &amp;ldquo;val&amp;rdquo;</span>
</span><span class='line'><span class="n">array</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// Will throw an exception.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">array</span> <span class="k">=</span> <span class="n">array</span> <span class="o">++</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// I&amp;rsquo;m reassigning the array value as &amp;ldquo;++&amp;rdquo; creates a new structure.</span>
</span><span class='line'><span class="n">array</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// The new array now has three elements. This will return 3.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Ok, all good, we now have a workaround and it works. Not the simplest and
definitely not the prettiest one, but it works. All set? Are we happy? Of
course we are not happy. It can&rsquo;t be that Scala won&rsquo;t consider a real mutable
list in its library.</p>

<p>Then again, you are right, the Scala team of course made this consideration.
But it&rsquo;s not a built-in data structure, but one you&rsquo;ll have to import from the
Scala collection library.</p>

<h4>Scala ListBuffer</h4>

<p>Ok, so we finally meet a real equivalent to the Python list. Or at least the
closest one I can think of. Scala ListBuffer is a mutable data structure which
can mimic a Python list&rsquo;s operations.</p>

<p>For this you&rsquo;ll have to import it as it is not in the built-in types of Scala
(but is included in the Scala library). First, let see a little about module
imports:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">import</span> <span class="nn">scala.collection.mutable.ListBuffer</span> <span class="c1">// Self explanatory&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">import</span> <span class="nn">scala.collection.mutable._</span>  <span class="c1">// Equivalent to Python: from library.sublibrary import *&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">import</span> <span class="nn">scala.collection.mutable.</span><span class="o">{</span><span class="nc">ListBuffer</span> <span class="k">=&gt;</span> <span class="nc">MutableList</span><span class="o">}</span> <span class="c1">// Rename of the import</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Very basics, don&rsquo;t think you need too much to be explained. Now lets get to the
real deal. Listbuffers, as well as arrays, are mutable in its values, which
means they can be changed. But also, a listbuffer has the classic append and
prepend operations without the need of creating a new structure out of it:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">list</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="c1">// ListBuffer can only store one type values as well as a List. Is a &amp;ldquo;val&amp;rdquo;.</span>
</span><span class='line'><span class="n">list</span><span class="k">:</span> <span class="kt">ListBuffer</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
</span><span class='line'><span class="n">res0</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">1</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="k">=</span> <span class="mi">2</span>  <span class="c1">// This is valid in ListBuffer&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
</span><span class='line'><span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">2</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="n">append</span><span class="o">(</span><span class="mi">4</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span>
</span><span class='line'><span class="n">res2</span><span class="k">:</span> <span class="kt">ListBuffer</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">.</span><span class="n">prepend</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Listbuffers also offer an operator to deal with appending elements at the end.
And finally, they can be easily converted to a Scala list for further working
(if by any chance you needed the listbuffer for an initial construction but
then all the operations are regular list operations):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">list</span> <span class="k">=</span> <span class="nc">ListBuffer</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span>
</span><span class='line'><span class="n">list</span> <span class="o">+=</span> <span class="mi">3</span> <span class="c1">// The new value of the list is: ListBuffer(1, 2, 3).&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">list</span> <span class="o">+</span> <span class="mi">3</span> <span class="c1">// Beware! this make no sense. And in many cases will throw a type mismatch.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">list</span> <span class="k">=</span> <span class="n">list</span> <span class="o">+</span> <span class="mi">3</span> <span class="c1">// Wrong. Even if the operation is permitted (not this case) this is a val reassign.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">list</span><span class="o">.</span><span class="n">toList</span> <span class="c1">// Returns a Scala List</span>
</span><span class='line'><span class="n">list</span><span class="o">.</span><span class="n">result</span> <span class="c1">// Same as before</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>There&rsquo;s also a Scala structure that you can import from the same library of the
ListBuffer, called ArrayBuffer. It provides functionality to append elements
similar to the one of the ListBuffer, but it returns an Array, which is a
better structure (more efficient) when you have to deal with large collections
and more imperative programming. Don&rsquo;t use it if you&rsquo;ll have to prepend many
values or you need the final result to be a list.</p>

<p>Other common data structures implemented in the Scala library include queues
and stacks (with internal array and list representations according to what you
need). I leave it to you to find out and look at the best option for you. The
Scala documentation is pretty well
<a href="http://docs.scala-lang.org/overviews/collections/introduction.html">written regarding the collections</a>,
specially the part where it explains the
<a href="http://docs.scala-lang.org/overviews/collections/performance-characteristics.html">performance characteristics</a>.</p>

<p>Ok my fellow readers. I hope you enjoyed the new chapter on my Python to Scala
tutorial. As always, thank you for your time and all comments are welcome.
Until next time, happy coding!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[From Python to Scala (III): Lists]]></title>
    <link href="http://crscardellino.me/blog/post/2014/08/05/from-python-to-scala-iii-lists/"/>
    <updated>2014-08-05T20:34:28+02:00</updated>
    <id>http://crscardellino.me/blog/post/2014/08/05/from-python-to-scala-iii-lists</id>
    <content type="html"><![CDATA[<p>Following with the series in this crash course from Python to Scala, today I&rsquo;ll
introduce one of the most useful Scala&rsquo;s data structures and make the
comparison to Python.</p>

<h4>Scala Lists</h4>

<p>Starting off with one of the most used data structures in Scala (and in
functional languages in general) and also the most common data structure in
Python as well: the lists.</p>

<p>A list in Scala is a data structure to represent a collection of values of the
same type. Lists are very used in Python, and the concept is quite similar in
Scala, with a couple of exceptions. First, in Python are written as a list of
comma-separated values between square brackets. The empty list, is represented
as a pair of empty square brackets:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">blockquote</span><span class="o">&gt;&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
</span><span class='line'><span class="n">squares</span>
</span><span class='line'><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
</span><span class='line'><span class="n">empty</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'><span class="n">empty</span>
</span><span class='line'><span class="p">[]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p></blockquote></blockquote></blockquote>

<p>In Scala, a list is build with the use of a constructor of name <em>List</em> and
the values passed by parameter to the constructor. The empty list is
represented by the empty constructor:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">squares</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">25</span><span class="o">)</span>
</span><span class='line'><span class="n">squares</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">25</span><span class="o">)&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">empty</span> <span class="k">=</span> <span class="nc">List</span><span class="o">()</span>
</span><span class='line'><span class="n">empty</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Nothing</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<!-- more -->


<p>One major difference between Python and Scala lists, is in the type. Python
support lists of different types, however in general (and is a good practice to
stick to it) lists in Python only contain elements of the same type. In Scala
this is not optional, lists may only contain elements of the same type in them.</p>

<p>If you take a good look at the previous examples, you&rsquo;ll notice that Scala uses
its type infer engine to determine the type of the lists. In the case of the
&ldquo;squares&rdquo; list, it&rsquo;s inferred that is a list of Int, while in the case of the
&ldquo;empty&rdquo; list, it is inferred that is a list of Nothing since there&rsquo;s no
information to determine the type of the list (it has no value).</p>

<p>Of course, as Scala lets you declare the type of a value or a variable, it&rsquo;s
possible to force the empty list to be of a certain type. This is very useful
in the needing of making some kind of manipulation between lists and operations
that requires the same type of list.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">var</span> <span class="n">empty</span> <span class="k">=</span> <span class="nc">List</span><span class="o">()</span>
</span><span class='line'><span class="n">empty</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="c1">// Incorrect. Results in a type error.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">var</span> <span class="n">emptyIntList</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">()</span>
</span><span class='line'><span class="n">emptyIntList</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="c1">// Correct. New value of the variable is List(1, 2, 3)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">emptyIntList</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">a</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;,</span> <span class="o">&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">b</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;,</span> <span class="o">&amp;</span><span class="n">ldquo</span><span class="o">;</span><span class="n">c</span><span class="o">&amp;</span><span class="n">rdquo</span><span class="o">;)</span> <span class="c1">// Incorrect. Results in type error.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Scala lists have a another constructor operator, named <strong>cons</strong> and represented
by two colons <strong>::</strong>. Along with another constructor for the empty list:
<strong>Nil</strong>. If you&rsquo;ve never heard about functional programming, this concept is
maybe new to you. For people with Lisp or Haskell background it comes quite
natural. In simple terms, a list in Scala can be constructed like so:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">square</span> <span class="k">=</span> <span class="mi">1</span> <span class="o">::</span> <span class="o">(</span><span class="mi">4</span> <span class="o">::</span> <span class="o">(</span><span class="mi">9</span> <span class="o">::</span> <span class="nc">Nil</span><span class="o">))</span> <span class="c1">// Equivalent to List(1, 4, 9)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">empty</span> <span class="k">=</span> <span class="nc">Nil</span> <span class="c1">// Equivalent to List() with type List[Nothing]&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">emptyIntList</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Nil</span> <span class="c1">// Equivalent to List() with type List[Int]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Although this format may seem unnatural for a Python programmer (and most
unnatural for someone who only knows imperative paradigm), this notation is
quite common and is very useful, as a matter of fact is essential, in pattern
matching, something we&rsquo;ll talk about later and that you must know if you plan
to use Scala at its full potential.</p>

<h4>Operations over Lists</h4>

<p>The three most common operations over a list are: <em>isEmpty</em>, <em>head</em> and <em>tail</em>.
The <em>isEmpty</em> operation, as its name says, check wether a list is empty or not.
The <em>head</em> operation over a list will return the first element of the list,
much like Python&rsquo;s &ldquo;pop(0)&rdquo;, but with the difference that it won&rsquo;t alter the
original list. Finally, the <em>tail</em> operation has no direct map to a Python&rsquo;s
list function (as far as I know of) and will return a new list with all the
elements of the original list but the first:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="k">val</span> <span class="n">empty</span> <span class="k">=</span> <span class="nc">Nil</span>
</span><span class='line'><span class="n">empty</span><span class="o">.</span><span class="n">isEmpty</span> <span class="c1">// Will return true&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">val</span> <span class="n">squares</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">9</span><span class="o">)</span>
</span><span class='line'><span class="n">squares</span><span class="o">.</span><span class="n">isEmpty</span> <span class="c1">// Will return false&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">squares</span><span class="o">.</span><span class="n">head</span> <span class="c1">// Will return 1</span>
</span><span class='line'><span class="n">squares</span><span class="o">.</span><span class="n">tail</span> <span class="c1">// Will return List(4, 9)</span>
</span><span class='line'><span class="n">squares</span>      <span class="c1">// Will return List(1, 4, 9). The original list never changes.&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">empty</span><span class="o">.</span><span class="n">head</span>   <span class="c1">// Invalid. Result in an exception. The same happens to empty.tail</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>As lists in Python, lists in Scala also have an indexing function, and as well
as in Python, indexing starts from 0. The difference is that negative indexing
is not possible in Scala:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">squares</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// Returns 1. Note that the indexing is with &amp;ldquo;()&amp;rdquo; instead of &amp;ldquo;[]&amp;rdquo;.</span>
</span><span class='line'><span class="n">squares</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="c1">// Returns 9.</span>
</span><span class='line'><span class="n">squares</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="c1">// Raises an exception.</span>
</span><span class='line'><span class="n">squares</span><span class="o">(-</span><span class="mi">1</span><span class="o">)</span> <span class="c1">// Raises an exception. This is valid in Python, not in Scala.</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Another common operation over a list is the slice. In Python this is done with
a colon in the indexing. In Scala you&rsquo;ll have to make use of the function
slice(from, until). Although you can use negative values, this won&rsquo;t work as in
Python:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='scala'><span class='line'><span class="n">squares</span><span class="o">.</span><span class="n">slice</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// Returns List(1, 4)</span>
</span><span class='line'><span class="n">squares</span><span class="o">.</span><span class="n">slice</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="c1">// Returns List()</span>
</span><span class='line'><span class="n">squares</span><span class="o">.</span><span class="n">slice</span><span class="o">(-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span> <span class="c1">// Returns List(1, 4, 9)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>There is a whole set of other methods and operations you can perform on a list,
and we won&rsquo;t discuss it here, check on the
<a href="http://www.scala-lang.org/api/current/index.html">Scala Documentation</a> for more
information on immutable lists.</p>

<p>This is all wonderful, but the structure that I&rsquo;ve shown you is not exactly the
list structure a Python programmer is used to. Scala&rsquo;s primitive lists are
immutable, which means you are not allowed to change the values they hold once
they are set. Nonetheless, there is another Scala structure that&rsquo;s more similar
to Python lists. We will discuss it in the next part of the tutorial.</p>

<p>Thank you again for reading this tutorial. I hope it&rsquo;s becoming more helpful
with each new post. Please comment if you have anything to add!</p>
]]></content>
  </entry>
  
</feed>
